import{r as e,j as t,a as n,c as r}from"./index-C5loLNT9.js";import{g as o,a as s,s as i,u as a,c,m as l}from"./DefaultPropsProvider-DdaabJBK.js";import{u as d,a as u,s as p,c as f}from"./TransitionGroupContext-oF5BF2eg.js";import{u as m,T as h,d as b,g as E,a as v,e as y}from"./useSlot-yd80tk_q.js";import{s as g}from"./supabase-ClnIyvqL.js";function x(...e){return e.reduce(((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)}),(()=>{}))}function w(e){return e&&e.ownerDocument||document}function R(e){return w(e).defaultView||window}function T(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function k(t){var n;return parseInt(e.version,10)>=19?(null==(n=null==t?void 0:t.props)?void 0:n.ref)||null:(null==t?void 0:t.ref)||null}const P=e.forwardRef((function(r,o){const{children:s,container:i,disablePortal:a=!1}=r,[c,l]=e.useState(null),f=d(e.isValidElement(s)?k(s):null,o);if(u((()=>{a||l(function(e){return"function"==typeof e?e():e}(i)||document.body)}),[i,a]),u((()=>{if(c&&!a)return p(o,c),()=>{p(o,null)}}),[o,c,a]),a){if(e.isValidElement(s)){const t={ref:f};return e.cloneElement(s,t)}return t.jsx(e.Fragment,{children:s})}return t.jsx(e.Fragment,{children:c?n.createPortal(s,c):c})})),I={entering:{opacity:1},entered:{opacity:1}},S=e.forwardRef((function(n,r){const o=m(),s={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:i,appear:a=!0,children:c,easing:l,in:u,onEnter:p,onEntered:f,onEntering:v,onExit:y,onExited:g,onExiting:x,style:w,timeout:R=s,TransitionComponent:T=h,...P}=n,S=e.useRef(null),C=d(S,k(c),r),M=e=>t=>{if(e){const n=S.current;void 0===t?e(n):e(n,t)}},A=M(v),F=M(((e,t)=>{b(e);const n=E({style:w,timeout:R,easing:l},{mode:"enter"});e.style.webkitTransition=o.transitions.create("opacity",n),e.style.transition=o.transitions.create("opacity",n),p&&p(e,t)})),N=M(f),j=M(x),L=M((e=>{const t=E({style:w,timeout:R,easing:l},{mode:"exit"});e.style.webkitTransition=o.transitions.create("opacity",t),e.style.transition=o.transitions.create("opacity",t),y&&y(e)})),O=M(g);return t.jsx(T,{appear:a,in:u,nodeRef:S,onEnter:F,onEntered:N,onEntering:A,onExit:L,onExited:O,onExiting:j,addEndListener:e=>{i&&i(S.current,e)},timeout:R,...P,children:(t,n)=>e.cloneElement(c,{style:{opacity:0,visibility:"exited"!==t||u?void 0:"hidden",...I[t],...w,...c.props.style},ref:C,...n})})}));function C(e){return s("MuiBackdrop",e)}o("MuiBackdrop",["root","invisible"]);const M=i("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),A=e.forwardRef((function(e,n){const o=a({props:e,name:"MuiBackdrop"}),{children:s,className:i,component:l="div",invisible:d=!1,open:u,components:p={},componentsProps:f={},slotProps:m={},slots:h={},TransitionComponent:b,transitionDuration:E,...y}=o,g={...o,component:l,invisible:d},x=(e=>{const{classes:t,invisible:n}=e;return c({root:["root",n&&"invisible"]},C,t)})(g),w={slots:{transition:b,root:p.Root,...h},slotProps:{...f,...m}},[R,T]=v("root",{elementType:M,externalForwardedProps:w,className:r(x.root,i),ownerState:g}),[k,P]=v("transition",{elementType:S,externalForwardedProps:w,ownerState:g}),I=(e=>{const{ownerState:t,...n}=e;return n})(P);return t.jsx(k,{in:u,timeout:E,...y,...I,children:t.jsx(R,{"aria-hidden":!0,...T,classes:x,ref:n,children:s})})}));function F(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function N(e){return parseInt(R(e).getComputedStyle(e).paddingRight,10)||0}function j(e,t,n,r,o){const s=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!s.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&F(e,o)}))}function L(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}const O=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function B(e){const t=[],n=[];return Array.from(e.querySelectorAll(O)).forEach(((e,r)=>{const o=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==o&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===o?t.push(e):n.push({documentOrder:r,tabIndex:o,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function D(){return!0}function K(n){const{children:r,disableAutoFocus:o=!1,disableEnforceFocus:s=!1,disableRestoreFocus:i=!1,getTabbable:a=B,isEnabled:c=D,open:l}=n,u=e.useRef(!1),p=e.useRef(null),f=e.useRef(null),m=e.useRef(null),h=e.useRef(null),b=e.useRef(!1),E=e.useRef(null),v=d(k(r),E),y=e.useRef(null);e.useEffect((()=>{l&&E.current&&(b.current=!o)}),[o,l]),e.useEffect((()=>{if(!l||!E.current)return;const e=w(E.current);return E.current.contains(e.activeElement)||(E.current.hasAttribute("tabIndex")||E.current.setAttribute("tabIndex","-1"),b.current&&E.current.focus()),()=>{i||(m.current&&m.current.focus&&(u.current=!0,m.current.focus()),m.current=null)}}),[l]),e.useEffect((()=>{if(!l||!E.current)return;const e=w(E.current),t=t=>{y.current=t,!s&&c()&&"Tab"===t.key&&e.activeElement===E.current&&t.shiftKey&&(u.current=!0,f.current&&f.current.focus())},n=()=>{var t,n;const r=E.current;if(null===r)return;if(!e.hasFocus()||!c()||u.current)return void(u.current=!1);if(r.contains(e.activeElement))return;if(s&&e.activeElement!==p.current&&e.activeElement!==f.current)return;if(e.activeElement!==h.current)h.current=null;else if(null!==h.current)return;if(!b.current)return;let o=[];if(e.activeElement!==p.current&&e.activeElement!==f.current||(o=a(E.current)),o.length>0){const e=Boolean((null==(t=y.current)?void 0:t.shiftKey)&&"Tab"===(null==(n=y.current)?void 0:n.key)),r=o[0],s=o[o.length-1];"string"!=typeof r&&"string"!=typeof s&&(e?s.focus():r.focus())}else r.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[o,s,i,c,l,a]);const g=e=>{null===m.current&&(m.current=e.relatedTarget),b.current=!0};return t.jsxs(e.Fragment,{children:[t.jsx("div",{tabIndex:l?0:-1,onFocus:g,ref:p,"data-testid":"sentinelStart"}),e.cloneElement(r,{ref:v,onFocus:e=>{null===m.current&&(m.current=e.relatedTarget),b.current=!0,h.current=e.target;const t=r.props.onFocus;t&&t(e)}}),t.jsx("div",{tabIndex:l?0:-1,onFocus:g,ref:f,"data-testid":"sentinelEnd"})]})}const q=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&F(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);j(t,e.mount,e.modalRef,r,!0);const o=L(this.containers,(e=>e.container===t));return-1!==o?(this.containers[o].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=L(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=function(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=w(e);return t.body===e?R(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=T(R(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${N(r)+e}px`;const t=w(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${N(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=w(r).body;else{const t=r.parentElement,n=R(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((({value:e,el:t,property:n})=>{e?t.style.setProperty(n,e):t.style.removeProperty(n)}))}}(r,t))}remove(e,t=!0){const n=this.modals.indexOf(e);if(-1===n)return n;const r=L(this.containers,(t=>t.modals.includes(e))),o=this.containers[r];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(n,1),0===o.modals.length)o.restore&&o.restore(),e.modalRef&&F(e.modalRef,t),j(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=o.modals[o.modals.length-1];e.modalRef&&F(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};function U(e){return s("MuiModal",e)}o("MuiModal",["root","hidden","backdrop"]);const H=i("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(l((({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]})))),W=i(A,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),$=e.forwardRef((function(n,o){const s=a({name:"MuiModal",props:n}),{BackdropComponent:i=W,BackdropProps:l,classes:u,className:p,closeAfterTransition:m=!1,children:h,container:b,component:E,components:g={},componentsProps:R={},disableAutoFocus:T=!1,disableEnforceFocus:k=!1,disableEscapeKeyDown:I=!1,disablePortal:S=!1,disableRestoreFocus:C=!1,disableScrollLock:M=!1,hideBackdrop:A=!1,keepMounted:N=!1,onBackdropClick:j,onClose:L,onTransitionEnter:O,onTransitionExited:B,open:D,slotProps:$={},slots:V={},theme:Y,...z}=s,G={...s,closeAfterTransition:m,disableAutoFocus:T,disableEnforceFocus:k,disableEscapeKeyDown:I,disablePortal:S,disableRestoreFocus:C,disableScrollLock:M,hideBackdrop:A,keepMounted:N},{getRootProps:_,getBackdropProps:X,getTransitionProps:J,portalRef:Q,isTopModal:Z,exited:ee,hasTransition:te}=function(t){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:o=!1,closeAfterTransition:s=!1,onTransitionEnter:i,onTransitionExited:a,children:c,onClose:l,open:u,rootRef:p}=t,m=e.useRef({}),h=e.useRef(null),b=e.useRef(null),E=d(b,p),[v,g]=e.useState(!u),R=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let T=!0;"false"!==t["aria-hidden"]&&!1!==t["aria-hidden"]||(T=!1);const k=()=>(m.current.modalRef=b.current,m.current.mount=h.current,m.current),P=()=>{q.mount(k(),{disableScrollLock:o}),b.current&&(b.current.scrollTop=0)},I=f((()=>{const e=function(e){return"function"==typeof e?e():e}(n)||w(h.current).body;q.add(k(),e),b.current&&P()})),S=()=>q.isTopModal(k()),C=f((e=>{h.current=e,e&&(u&&S()?P():b.current&&F(b.current,T))})),M=e.useCallback((()=>{q.remove(k(),T)}),[T]);e.useEffect((()=>()=>{M()}),[M]),e.useEffect((()=>{u?I():R&&s||M()}),[u,M,R,s,I]);const A=e=>t=>{var n;null==(n=e.onKeyDown)||n.call(e,t),"Escape"===t.key&&229!==t.which&&S()&&(r||(t.stopPropagation(),l&&l(t,"escapeKeyDown")))},N=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&l&&l(t,"backdropClick")};return{getRootProps:(e={})=>{const n=y(t);delete n.onTransitionEnter,delete n.onTransitionExited;const r={...n,...e};return{role:"presentation",...r,onKeyDown:A(r),ref:E}},getBackdropProps:(e={})=>{const t=e;return{"aria-hidden":!0,...t,onClick:N(t),open:u}},getTransitionProps:()=>({onEnter:x((()=>{g(!1),i&&i()}),null==c?void 0:c.props.onEnter),onExited:x((()=>{g(!0),a&&a(),s&&M()}),null==c?void 0:c.props.onExited)}),rootRef:E,portalRef:C,isTopModal:S,exited:v,hasTransition:R}}({...G,rootRef:o}),ne={...G,exited:ee},re=(e=>{const{open:t,exited:n,classes:r}=e;return c({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},U,r)})(ne),oe={};if(void 0===h.props.tabIndex&&(oe.tabIndex="-1"),te){const{onEnter:e,onExited:t}=J();oe.onEnter=e,oe.onExited=t}const se={...z,slots:{root:g.Root,backdrop:g.Backdrop,...V},slotProps:{...R,...$}},[ie,ae]=v("root",{elementType:H,externalForwardedProps:se,getSlotProps:_,additionalProps:{ref:o,as:E},ownerState:ne,className:r(p,null==re?void 0:re.root,!ne.open&&ne.exited&&(null==re?void 0:re.hidden))}),[ce,le]=v("backdrop",{elementType:i,externalForwardedProps:se,additionalProps:l,getSlotProps:e=>X({...e,onClick:t=>{j&&j(t),(null==e?void 0:e.onClick)&&e.onClick(t)}}),className:r(null==l?void 0:l.className,null==re?void 0:re.backdrop),ownerState:ne}),de=d(null==l?void 0:l.ref,le.ref);return N||D||te&&!ee?t.jsx(P,{ref:Q,container:b,disablePortal:S,children:t.jsxs(ie,{...ae,children:[!A&&i?t.jsx(ce,{...le,ref:de}):null,t.jsx(K,{disableEnforceFocus:k,disableAutoFocus:T,disableRestoreFocus:C,isEnabled:Z,open:D,children:e.cloneElement(h,oe)})]})}):null}));async function V({productId:e}){const{data:t,error:n}=await g.from("comments").select("*").eq("productId",e);if(n)throw new Error(n);return t}async function Y({pageParam:e,COMMENTS_PER_PAGE:t}){const{data:n,error:r}=await g.from("comments").select("*").order("created_at",{ascending:!1}).range((e-1)*t,e*t-1);if(r)throw new Error(r);return n}async function z({...e}){const{data:t,error:n}=await g.from("comments").insert([{...e}]);if(n)throw new Error(n);return t}async function G({useravatar:e,userId:t}){const{data:n,error:r}=await g.from("comments").update({useravatar:e}).eq("userId",t);if(r)throw new Error(r);return n}async function _({id:e}){const{data:t,error:n}=await g.from("comments").update({isConfirm:!0}).eq("id",e);if(n)throw new Error(n);return t}async function X({id:e}){const{data:t,error:n}=await g.from("comments").delete().eq("id",e);if(n)throw new Error(n);return t}export{A as B,$ as M,T as a,w as b,V as c,Y as d,_ as e,X as f,k as g,z as i,R as o,G as u};
