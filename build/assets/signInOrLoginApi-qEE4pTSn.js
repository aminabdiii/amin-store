import{s}from"./supabase-ClnIyvqL.js";async function e({fullName:e,userName:a,email:r,password:t}){const{data:i,error:u}=await s.auth.signUp({email:r,password:t,options:{data:{avatar:"",fullName:e,userName:a}}});if(u)throw new Error(u);const{data:o}=await s.from("carts").select("*").eq("user_id",i.user.id);o.length||await s.from("carts").insert([{user_id:i.user.id,cart_items:[],purchases:[]}]).select();const{data:d}=await s.from("users").select("*").eq("userId",i.user.id);return d.length||await s.from("users").insert([{userId:i.user.id,role:"authenticated"}]),i}async function a({email:e,password:a}){const{data:r,error:t}=await s.auth.signInWithPassword({email:e,password:a});if(t)throw new Error(t);const{data:i}=await s.from("carts").select("*").eq("user_id",r.user.id);i.length||await s.from("carts").insert([{user_id:r.user.id,cart_items:[],purchases:[]}]).select();const{data:u}=await s.from("users").select("*").eq("userId",r.user.id);return u.length||await s.from("users").insert([{userId:r.user.id,role:"authenticated"}]),r}export{a as l,e as s};
