import{Q as e,u as t}from"./useBaseQuery-Dhpcymqo.js";import{k as r,l as i,m as s,r as n}from"./index-C5loLNT9.js";var o=class extends e{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:r()},t)}getOptimisticResult(e){return e.behavior=r(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var r,n;const{state:o}=e,a=super.createResult(e,t),{isFetching:c,isRefetching:h,isError:u,isRefetchError:d}=a,f=null==(n=null==(r=o.fetchMeta)?void 0:r.fetchMore)?void 0:n.direction,g=u&&"forward"===f,l=c&&"forward"===f,v=u&&"backward"===f,b=c&&"backward"===f;return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:i(t,o.data),hasPreviousPage:s(t,o.data),isFetchNextPageError:g,isFetchingNextPage:l,isFetchPreviousPageError:v,isFetchingPreviousPage:b,isRefetchError:d&&!g&&!v,isRefetching:h&&!l&&!b}}};function a(e,r){return t(e,o)}var c=new Map,h=new WeakMap,u=0;function d(e,t,r={},i=void 0){if(void 0===window.IntersectionObserver&&void 0!==i){const s=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}const{id:s,observer:n,elements:o}=function(e){const t=function(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(r=e.root,r?(h.has(r)||(u+=1,h.set(r,u.toString())),h.get(r)):"0"):e[t]}`;var r})).toString()}(e);let r=c.get(t);if(!r){const i=new Map;let s;const n=new IntersectionObserver((t=>{t.forEach((t=>{var r;const n=t.isIntersecting&&s.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=n),null==(r=i.get(t.target))||r.forEach((e=>{e(n,t)}))}))}),e);s=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:n,elements:i},c.set(t,r)}return r}(r),a=o.get(e)||[];return o.has(e)||o.set(e,a),a.push(t),n.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(o.delete(e),n.unobserve(e)),0===o.size&&(n.disconnect(),c.delete(s))}}function f({threshold:e,delay:t,trackVisibility:r,rootMargin:i,root:s,triggerOnce:o,skip:a,initialInView:c,fallbackInView:h,onChange:u}={}){var f;const[g,l]=n.useState(null),v=n.useRef(),[b,P]=n.useState({inView:!!c,entry:void 0});v.current=u,n.useEffect((()=>{if(a||!g)return;let n;return n=d(g,((e,t)=>{P({inView:e,entry:t}),v.current&&v.current(e,t),t.isIntersecting&&o&&n&&(n(),n=void 0)}),{root:s,rootMargin:i,threshold:e,trackVisibility:r,delay:t},h),()=>{n&&n()}}),[Array.isArray(e)?e.toString():e,g,s,i,o,a,r,h,t]);const p=null==(f=b.entry)?void 0:f.target,w=n.useRef();g||!p||o||a||w.current===p||(w.current=p,P({inView:!!c,entry:void 0}));const y=[l,b.inView,b.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}function g({fetchNextPage:e,inView:t}){n.useEffect((()=>{t&&e()}),[e,t])}export{f as a,g as b,a as u};
